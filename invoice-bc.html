<html>

<body>
  <script type="module">
  import confetti from 'https://cdn.skypack.dev/canvas-confetti';
  import {requestProvider} from 'https://esm.sh/@getalby/bitcoin-connect@3.0.0-beta.3'; // jsdelivr.net, skypack.dev also work
  import { LightningAddress } from "https://esm.sh/@getalby/lightning-tools@5.0.0"; // jsdelivr.net, skypack.dev also work

  
    (async () => {
      
      const ln = new LightningAddress("hello@getalby.com");
      // fetch the LNURL data
      await ln.fetch();
      // get the LNURL-pay data:
      console.log(ln.lnurlpData); // returns a [LNURLPayResponse](https://github.com/getAlby/alby-tools/blob/master/src/types.ts#L1-L15)
      const invoice = await ln.requestInvoice({
        satoshi: 1
      });
      document.body.innerHTML += invoice.paymentRequest;
      document.body.innerHTML += "<br/>";
      document.body.innerHTML += "waiting for payment";
      document.getElementById('pay').addEventListener('click', async () => {
        const provider = await requestProvider();
        await provider.sendPayment(invoice.paymentRequest);
        document.body.innerHTML += "PAID!";
        confetti();
      });
      
      
    })();
  </script>
  <h1>Invoice + Bitcoin Connect!</h1>
  <p id="invoice"></p>
  <bc-button></bc-button>
  <br/>
  <button id="pay">Pay invoice</button>
  <br/><br/>
</body>

</html>